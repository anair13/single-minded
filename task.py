from db import *
from datetime import datetime

class Task:
    
    def __init__(self, user, title, description, deadline, priority, effort):
        self.timestamp = str(datetime.now()) # this is autogenerated
        self.ordinality = 0 
        self.user = user
        self.title = title
        self.description = description
        self.time = deadline
        self.priority = priority
        self.effort = effort
        self.complete = False
        
    def save_to_db(self):
        """Save this task to the tasks table"""
        cur = get_db().cursor()
        cur.execute("INSERT INTO tasks (userid, title, description, timestamp, deadline, priority, effort, ordinality, complete) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)", self.get_values())
        get_db().commit()
        
    def render(self):
        """Return the HTML rendering of a task with a template"""
        pass
    
    def get_values(self):
        """Return all the values for insertion into databases
        (taskid, userid, title, description, timestamp, deadline, priority, effort, ordinality, complete)
        """
        return (self.user, self.title, self.description, self.timestamp, self.time, self.priority, self.effort, self.ordinality, self.complete)
